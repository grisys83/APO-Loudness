#include "MainWindow.h"
#include <QFont>
#include <QFile>
#include <QTextStream>
#include <QStringList>
#include <QString>
#include <cmath>     // For std::round, std::abs
#include <QIcon>
#include <QDebug>
#include <QMap>
#include <algorithm> // For std::find, std::distance
#include <limits>    // For std::numeric_limits
#include <QMouseEvent> // For QMouseEvent
#include <QRegularExpression>

// --- Pre-calculated preamp values ---
// Key1: Reference Phon, Key2: Target Phon, Value: Recommended Preamp
// 이 맵은 모든 (Reference Phon, Target Phon [60.0-80.0]) 조합에 대한
// 계산된 값으로 채워져야 합니다.
// 여기서는 Reference Phon 80.0에 대한 데이터만 예시로 일부 채우고,
// 나머지는 실제 계산된 값으로 채워야 합니다.
const QMap<double, QMap<double, double>> recommendedPreampMap = {
    {80.0, {
        {60.0, -11.52}, {60.1, -11.47}, {60.2, -11.42}, {60.3, -11.36}, {60.4, -11.31},
        {60.5, -11.26}, {60.6, -11.21}, {60.7, -11.15}, {60.8, -11.10}, {60.9, -11.05},
        {61.0, -11.00}, {61.1, -10.94}, {61.2, -10.89}, {61.3, -10.84}, {61.4, -10.79},
        {61.5, -10.73}, {61.6, -10.68}, {61.7, -10.63}, {61.8, -10.57}, {61.9, -10.52},
        {62.0, -10.47}, {62.1, -10.42}, {62.2, -10.36}, {62.3, -10.31}, {62.4, -10.26},
        {62.5, -10.21}, {62.6, -10.15}, {62.7, -10.10}, {62.8, -10.05}, {62.9, -10.00},
        {63.0, -9.94},  {63.1, -9.89},  {63.2, -9.84},  {63.3, -9.79},  {63.4, -9.73},
        {63.5, -9.68},  {63.6, -9.63},  {63.7, -9.58},  {63.8, -9.52},  {63.9, -9.47},
        {64.0, -9.42},  {64.1, -9.36},  {64.2, -9.31},  {64.3, -9.26},  {64.4, -9.21},
        {64.5, -9.15},  {64.6, -9.10},  {64.7, -9.05},  {64.8, -9.00},  {64.9, -8.94},
        {65.0, -8.89},  {65.1, -8.84},  {65.2, -8.79},  {65.3, -8.73},  {65.4, -8.68},
        {65.5, -8.63},  {65.6, -8.58},  {65.7, -8.52},  {65.8, -8.47},  {65.9, -8.42},
        {66.0, -8.37},  {66.1, -8.31},  {66.2, -8.26},  {66.3, -8.21},  {66.4, -8.15},
        {66.5, -8.10},  {66.6, -8.05},  {66.7, -8.00},  {66.8, -7.94},  {66.9, -7.89},
        {67.0, -7.84},  {67.1, -7.79},  {67.2, -7.73},  {67.3, -7.68},  {67.4, -7.63},
        {67.5, -7.58},  {67.6, -7.52},  {67.7, -7.47},  {67.8, -7.42},  {67.9, -7.37},
        {68.0, -7.31},  {68.1, -7.26},  {68.2, -7.21},  {68.3, -7.16},  {68.4, -7.10},
        {68.5, -7.05},  {68.6, -7.00},  {68.7, -6.94},  {68.8, -6.89},  {68.9, -6.84},
        {69.0, -6.79},  {69.1, -6.73},  {69.2, -6.68},  {69.3, -6.63},  {69.4, -6.58},
        {69.5, -6.52},  {69.6, -6.47},  {69.7, -6.42},  {69.8, -6.37},  {69.9, -6.31},
        {70.0, -6.26},  {70.1, -6.21},  {70.2, -6.16},  {70.3, -6.10},  {70.4, -6.05},
        {70.5, -6.00},  {70.6, -5.95},  {70.7, -5.89},  {70.8, -5.84},  {70.9, -5.79},
        {71.0, -5.73},  {71.1, -5.68},  {71.2, -5.63},  {71.3, -5.58},  {71.4, -5.52},
        {71.5, -5.47},  {71.6, -5.42},  {71.7, -5.37},  {71.8, -5.31},  {71.9, -5.26},
        {72.0, -5.21},  {72.1, -5.16},  {72.2, -5.10},  {72.3, -5.05},  {72.4, -5.00},
        {72.5, -4.95},  {72.6, -4.89},  {72.7, -4.84},  {72.8, -4.79},  {72.9, -4.74},
        {73.0, -4.68},  {73.1, -4.63},  {73.2, -4.58},  {73.3, -4.52},  {73.4, -4.47},
        {73.5, -4.42},  {73.6, -4.37},  {73.7, -4.31},  {73.8, -4.26},  {73.9, -4.21},
        {74.0, -4.16},  {74.1, -4.10},  {74.2, -4.05},  {74.3, -4.00},  {74.4, -3.95},
        {74.5, -3.89},  {74.6, -3.84},  {74.7, -3.79},  {74.8, -3.74},  {74.9, -3.68},
        {75.0, -3.63},  {75.1, -3.58},  {75.2, -3.53},  {75.3, -3.47},  {75.4, -3.42},
        {75.5, -3.37},  {75.6, -3.31},  {75.7, -3.26},  {75.8, -3.21},  {75.9, -3.16},
        {76.0, -3.10},  {76.1, -3.05},  {76.2, -3.00},  {76.3, -2.95},  {76.4, -2.89},
        {76.5, -2.84},  {76.6, -2.79},  {76.7, -2.74},  {76.8, -2.68},  {76.9, -2.63},
        {77.0, -2.58},  {77.1, -2.53},  {77.2, -2.47},  {77.3, -2.42},  {77.4, -2.37},
        {77.5, -2.32},  {77.6, -2.26},  {77.7, -2.21},  {77.8, -2.16},  {77.9, -2.10},
        {78.0, -2.05},  {78.1, -2.00},  {78.2, -1.95},  {78.3, -1.89},  {78.4, -1.84},
        {78.5, -1.79},  {78.6, -1.74},  {78.7, -1.68},  {78.8, -1.63},  {78.9, -1.58},
        {79.0, -1.53},  {79.1, -1.47},  {79.2, -1.42},  {79.3, -1.37},  {79.4, -1.32},
        {79.5, -1.26},  {79.6, -1.21},  {79.7, -1.16},  {79.8, -1.11},  {79.9, -1.05},
        {80.0, -1.00}
    }},
    {81.0, {
        {60.0, -12.05}, {60.1, -12.00}, {60.2, -11.95}, {60.3, -11.89}, {60.4, -11.84},
        {60.5, -11.79}, {60.6, -11.74}, {60.7, -11.68}, {60.8, -11.63}, {60.9, -11.58},
        {61.0, -11.52}, {61.1, -11.47}, {61.2, -11.42}, {61.3, -11.37}, {61.4, -11.31},
        {61.5, -11.26}, {61.6, -11.21}, {61.7, -11.16}, {61.8, -11.10}, {61.9, -11.05},
        {62.0, -11.00}, {62.1, -10.95}, {62.2, -10.89}, {62.3, -10.84}, {62.4, -10.79},
        {62.5, -10.74}, {62.6, -10.68}, {62.7, -10.63}, {62.8, -10.58}, {62.9, -10.52},
        {63.0, -10.47}, {63.1, -10.42}, {63.2, -10.37}, {63.3, -10.31}, {63.4, -10.26},
        {63.5, -10.21}, {63.6, -10.16}, {63.7, -10.10}, {63.8, -10.05}, {63.9, -10.00},
        {64.0, -9.95},  {64.1, -9.89},  {64.2, -9.84},  {64.3, -9.79},  {64.4, -9.74},
        {64.5, -9.68},  {64.6, -9.63},  {64.7, -9.58},  {64.8, -9.53},  {64.9, -9.47},
        {65.0, -9.42},  {65.1, -9.37},  {65.2, -9.32},  {65.3, -9.26},  {65.4, -9.21},
        {65.5, -9.16},  {65.6, -9.10},  {65.7, -9.05},  {65.8, -9.00},  {65.9, -8.95},
        {66.0, -8.89},  {66.1, -8.84},  {66.2, -8.79},  {66.3, -8.74},  {66.4, -8.68},
        {66.5, -8.63},  {66.6, -8.58},  {66.7, -8.53},  {66.8, -8.47},  {66.9, -8.42},
        {67.0, -8.37},  {67.1, -8.32},  {67.2, -8.26},  {67.3, -8.21},  {67.4, -8.16},
        {67.5, -8.11},  {67.6, -8.05},  {67.7, -8.00},  {67.8, -7.95},  {67.9, -7.89},
        {68.0, -7.84},  {68.1, -7.79},  {68.2, -7.74},  {68.3, -7.68},  {68.4, -7.63},
        {68.5, -7.58},  {68.6, -7.53},  {68.7, -7.47},  {68.8, -7.42},  {68.9, -7.37},
        {69.0, -7.32},  {69.1, -7.26},  {69.2, -7.21},  {69.3, -7.16},  {69.4, -7.11},
        {69.5, -7.05},  {69.6, -7.00},  {69.7, -6.95},  {69.8, -6.90},  {69.9, -6.84},
        {70.0, -6.79},  {70.1, -6.74},  {70.2, -6.68},  {70.3, -6.63},  {70.4, -6.58},
        {70.5, -6.53},  {70.6, -6.47},  {70.7, -6.42},  {70.8, -6.37},  {70.9, -6.32},
        {71.0, -6.26},  {71.1, -6.21},  {71.2, -6.16},  {71.3, -6.11},  {71.4, -6.05},
        {71.5, -6.00},  {71.6, -5.95},  {71.7, -5.90},  {71.8, -5.84},  {71.9, -5.79},
        {72.0, -5.74},  {72.1, -5.69},  {72.2, -5.63},  {72.3, -5.58},  {72.4, -5.53},
        {72.5, -5.47},  {72.6, -5.42},  {72.7, -5.37},  {72.8, -5.32},  {72.9, -5.26},
        {73.0, -5.21},  {73.1, -5.16},  {73.2, -5.11},  {73.3, -5.05},  {73.4, -5.00},
        {73.5, -4.95},  {73.6, -4.90},  {73.7, -4.84},  {73.8, -4.79},  {73.9, -4.74},
        {74.0, -4.69},  {74.1, -4.63},  {74.2, -4.58},  {74.3, -4.53},  {74.4, -4.47},
        {74.5, -4.42},  {74.6, -4.37},  {74.7, -4.32},  {74.8, -4.26},  {74.9, -4.21},
        {75.0, -4.16},  {75.1, -4.11},  {75.2, -4.05},  {75.3, -4.00},  {75.4, -3.95},
        {75.5, -3.90},  {75.6, -3.84},  {75.7, -3.79},  {75.8, -3.74},  {75.9, -3.69},
        {76.0, -3.63},  {76.1, -3.58},  {76.2, -3.53},  {76.3, -3.48},  {76.4, -3.42},
        {76.5, -3.37},  {76.6, -3.32},  {76.7, -3.27},  {76.8, -3.21},  {76.9, -3.16},
        {77.0, -3.11},  {77.1, -3.05},  {77.2, -3.00},  {77.3, -2.95},  {77.4, -2.90},
        {77.5, -2.84},  {77.6, -2.79},  {77.7, -2.74},  {77.8, -2.69},  {77.9, -2.63},
        {78.0, -2.58},  {78.1, -2.53},  {78.2, -2.48},  {78.3, -2.42},  {78.4, -2.37},
        {78.5, -2.32},  {78.6, -2.27},  {78.7, -2.21},  {78.8, -2.16},  {78.9, -2.11},
        {79.0, -2.05},  {79.1, -2.00},  {79.2, -1.95},  {79.3, -1.90},  {79.4, -1.84},
        {79.5, -1.79},  {79.6, -1.74},  {79.7, -1.69},  {79.8, -1.63},  {79.9, -1.58},
        {80.0, -1.53}   // Max Target Phon for this Reference Phon (if Target <= Ref)
                        // Target 81.0 for Ref 81.0 would be -1.00
    }},
    {82.0, {
        {60.0, -12.58}, {60.1, -12.53}, {60.2, -12.47}, {60.3, -12.42}, {60.4, -12.37},
        {60.5, -12.32}, {60.6, -12.26}, {60.7, -12.21}, {60.8, -12.16}, {60.9, -12.11},
        {61.0, -12.05}, {61.1, -12.00}, {61.2, -11.95}, {61.3, -11.90}, {61.4, -11.84},
        {61.5, -11.79}, {61.6, -11.74}, {61.7, -11.69}, {61.8, -11.63}, {61.9, -11.58},
        {62.0, -11.53}, {62.1, -11.47}, {62.2, -11.42}, {62.3, -11.37}, {62.4, -11.32},
        {62.5, -11.26}, {62.6, -11.21}, {62.7, -11.16}, {62.8, -11.11}, {62.9, -11.05},
        {63.0, -11.00}, {63.1, -10.95}, {63.2, -10.90}, {63.3, -10.84}, {63.4, -10.79},
        {63.5, -10.74}, {63.6, -10.69}, {63.7, -10.63}, {63.8, -10.58}, {63.9, -10.53},
        {64.0, -10.48}, {64.1, -10.42}, {64.2, -10.37}, {64.3, -10.32}, {64.4, -10.26},
        {64.5, -10.21}, {64.6, -10.16}, {64.7, -10.11}, {64.8, -10.05}, {64.9, -10.00},
        {65.0, -9.95},  {65.1, -9.90},  {65.2, -9.84},  {65.3, -9.79},  {65.4, -9.74},
        {65.5, -9.69},  {65.6, -9.63},  {65.7, -9.58},  {65.8, -9.53},  {65.9, -9.48},
        {66.0, -9.42},  {66.1, -9.37},  {66.2, -9.32},  {66.3, -9.27},  {66.4, -9.21},
        {66.5, -9.16},  {66.6, -9.11},  {66.7, -9.05},  {66.8, -9.00},  {66.9, -8.95},
        {67.0, -8.90},  {67.1, -8.84},  {67.2, -8.79},  {67.3, -8.74},  {67.4, -8.69},
        {67.5, -8.63},  {67.6, -8.58},  {67.7, -8.53},  {67.8, -8.48},  {67.9, -8.42},
        {68.0, -8.37},  {68.1, -8.32},  {68.2, -8.27},  {68.3, -8.21},  {68.4, -8.16},
        {68.5, -8.11},  {68.6, -8.06},  {68.7, -8.00},  {68.8, -7.95},  {68.9, -7.90},
        {69.0, -7.84},  {69.1, -7.79},  {69.2, -7.74},  {69.3, -7.69},  {69.4, -7.63},
        {69.5, -7.58},  {69.6, -7.53},  {69.7, -7.48},  {69.8, -7.42},  {69.9, -7.37},
        {70.0, -7.32},  {70.1, -7.27},  {70.2, -7.21},  {70.3, -7.16},  {70.4, -7.11},
        {70.5, -7.06},  {70.6, -7.00},  {70.7, -6.95},  {70.8, -6.90},  {70.9, -6.85},
        {71.0, -6.79},  {71.1, -6.74},  {71.2, -6.69},  {71.3, -6.63},  {71.4, -6.58},
        {71.5, -6.53},  {71.6, -6.48},  {71.7, -6.42},  {71.8, -6.37},  {71.9, -6.32},
        {72.0, -6.27},  {72.1, -6.21},  {72.2, -6.16},  {72.3, -6.11},  {72.4, -6.06},
        {72.5, -6.00},  {72.6, -5.95},  {72.7, -5.90},  {72.8, -5.85},  {72.9, -5.79},
        {73.0, -5.74},  {73.1, -5.69},  {73.2, -5.64},  {73.3, -5.58},  {73.4, -5.53},
        {73.5, -5.48},  {73.6, -5.42},  {73.7, -5.37},  {73.8, -5.32},  {73.9, -5.27},
        {74.0, -5.21},  {74.1, -5.16},  {74.2, -5.11},  {74.3, -5.06},  {74.4, -5.00},
        {74.5, -4.95},  {74.6, -4.90},  {74.7, -4.85},  {74.8, -4.79},  {74.9, -4.74},
        {75.0, -4.69},  {75.1, -4.64},  {75.2, -4.58},  {75.3, -4.53},  {75.4, -4.48},
        {75.5, -4.43},  {75.6, -4.37},  {75.7, -4.32},  {75.8, -4.27},  {75.9, -4.21},
        {76.0, -4.16},  {76.1, -4.11},  {76.2, -4.06},  {76.3, -4.00},  {76.4, -3.95},
        {76.5, -3.90},  {76.6, -3.85},  {76.7, -3.79},  {76.8, -3.74},  {76.9, -3.69},
        {77.0, -3.64},  {77.1, -3.58},  {77.2, -3.53},  {77.3, -3.48},  {77.4, -3.43},
        {77.5, -3.37},  {77.6, -3.32},  {77.7, -3.27},  {77.8, -3.22},  {77.9, -3.16},
        {78.0, -3.11},  {78.1, -3.06},  {78.2, -3.00},  {78.3, -2.95},  {78.4, -2.90},
        {78.5, -2.85},  {78.6, -2.79},  {78.7, -2.74},  {78.8, -2.69},  {78.9, -2.64},
        {79.0, -2.58},  {79.1, -2.53},  {79.2, -2.48},  {79.3, -2.43},  {79.4, -2.37},
        {79.5, -2.32},  {79.6, -2.27},  {79.7, -2.22},  {79.8, -2.16},  {79.9, -2.11},
        {80.0, -2.06}
    }},
    {83.0, {
        {60.0, -13.11}, {60.1, -13.06}, {60.2, -13.00}, {60.3, -12.95}, {60.4, -12.90},
        {60.5, -12.85}, {60.6, -12.79}, {60.7, -12.74}, {60.8, -12.69}, {60.9, -12.63},
        {61.0, -12.58}, {61.1, -12.53}, {61.2, -12.48}, {61.3, -12.42}, {61.4, -12.37},
        {61.5, -12.32}, {61.6, -12.27}, {61.7, -12.21}, {61.8, -12.16}, {61.9, -12.11},
        {62.0, -12.06}, {62.1, -12.00}, {62.2, -11.95}, {62.3, -11.90}, {62.4, -11.85},
        {62.5, -11.79}, {62.6, -11.74}, {62.7, -11.69}, {62.8, -11.64}, {62.9, -11.58},
        {63.0, -11.53}, {63.1, -11.48}, {63.2, -11.42}, {63.3, -11.37}, {63.4, -11.32},
        {63.5, -11.27}, {63.6, -11.21}, {63.7, -11.16}, {63.8, -11.11}, {63.9, -11.06},
        {64.0, -11.00}, {64.1, -10.95}, {64.2, -10.90}, {64.3, -10.85}, {64.4, -10.79},
        {64.5, -10.74}, {64.6, -10.69}, {64.7, -10.64}, {64.8, -10.58}, {64.9, -10.53},
        {65.0, -10.48}, {65.1, -10.43}, {65.2, -10.37}, {65.3, -10.32}, {65.4, -10.27},
        {65.5, -10.21}, {65.6, -10.16}, {65.7, -10.11}, {65.8, -10.06}, {65.9, -10.00},
        {66.0, -9.95},  {66.1, -9.90},  {66.2, -9.85},  {66.3, -9.79},  {66.4, -9.74},
        {66.5, -9.69},  {66.6, -9.64},  {66.7, -9.58},  {66.8, -9.53},  {66.9, -9.48},
        {67.0, -9.43},  {67.1, -9.37},  {67.2, -9.32},  {67.3, -9.27},  {67.4, -9.22},
        {67.5, -9.16},  {67.6, -9.11},  {67.7, -9.06},  {67.8, -9.00},  {67.9, -8.95},
        {68.0, -8.90},  {68.1, -8.85},  {68.2, -8.79},  {68.3, -8.74},  {68.4, -8.69},
        {68.5, -8.64},  {68.6, -8.58},  {68.7, -8.53},  {68.8, -8.48},  {68.9, -8.43},
        {69.0, -8.37},  {69.1, -8.32},  {69.2, -8.27},  {69.3, -8.22},  {69.4, -8.16},
        {69.5, -8.11},  {69.6, -8.06},  {69.7, -8.01},  {69.8, -7.95},  {69.9, -7.90},
        {70.0, -7.85},  {70.1, -7.79},  {70.2, -7.74},  {70.3, -7.69},  {70.4, -7.64},
        {70.5, -7.58},  {70.6, -7.53},  {70.7, -7.48},  {70.8, -7.43},  {70.9, -7.37},
        {71.0, -7.32},  {71.1, -7.27},  {71.2, -7.22},  {71.3, -7.16},  {71.4, -7.11},
        {71.5, -7.06},  {71.6, -7.01},  {71.7, -6.95},  {71.8, -6.90},  {71.9, -6.85},
        {72.0, -6.80},  {72.1, -6.74},  {72.2, -6.69},  {72.3, -6.64},  {72.4, -6.58},
        {72.5, -6.53},  {72.6, -6.48},  {72.7, -6.43},  {72.8, -6.37},  {72.9, -6.32},
        {73.0, -6.27},  {73.1, -6.22},  {73.2, -6.16},  {73.3, -6.11},  {73.4, -6.06},
        {73.5, -6.01},  {73.6, -5.95},  {73.7, -5.90},  {73.8, -5.85},  {73.9, -5.80},
        {74.0, -5.74},  {74.1, -5.69},  {74.2, -5.64},  {74.3, -5.59},  {74.4, -5.53},
        {74.5, -5.48},  {74.6, -5.43},  {74.7, -5.37},  {74.8, -5.32},  {74.9, -5.27},
        {75.0, -5.22},  {75.1, -5.16},  {75.2, -5.11},  {75.3, -5.06},  {75.4, -5.01},
        {75.5, -4.95},  {75.6, -4.90},  {75.7, -4.85},  {75.8, -4.80},  {75.9, -4.74},
        {76.0, -4.69},  {76.1, -4.64},  {76.2, -4.59},  {76.3, -4.53},  {76.4, -4.48},
        {76.5, -4.43},  {76.6, -4.38},  {76.7, -4.32},  {76.8, -4.27},  {76.9, -4.22},
        {77.0, -4.16},  {77.1, -4.11},  {77.2, -4.06},  {77.3, -4.01},  {77.4, -3.95},
        {77.5, -3.90},  {77.6, -3.85},  {77.7, -3.80},  {77.8, -3.74},  {77.9, -3.69},
        {78.0, -3.64},  {78.1, -3.59},  {78.2, -3.53},  {78.3, -3.48},  {78.4, -3.43},
        {78.5, -3.38},  {78.6, -3.32},  {78.7, -3.27},  {78.8, -3.22},  {78.9, -3.17},
        {79.0, -3.11},  {79.1, -3.06},  {79.2, -3.01},  {79.3, -2.95},  {79.4, -2.90},
        {79.5, -2.85},  {79.6, -2.80},  {79.7, -2.74},  {79.8, -2.69},  {79.9, -2.64},
        {80.0, -2.59}
    }},
    {84.0, {
        {60.0, -13.64}, {60.1, -13.58}, {60.2, -13.53}, {60.3, -13.48}, {60.4, -13.43},
        {60.5, -13.37}, {60.6, -13.32}, {60.7, -13.27}, {60.8, -13.22}, {60.9, -13.16},
        {61.0, -13.11}, {61.1, -13.06}, {61.2, -13.01}, {61.3, -12.95}, {61.4, -12.90},
        {61.5, -12.85}, {61.6, -12.80}, {61.7, -12.74}, {61.8, -12.69}, {61.9, -12.64},
        {62.0, -12.59}, {62.1, -12.53}, {62.2, -12.48}, {62.3, -12.43}, {62.4, -12.37},
        {62.5, -12.32}, {62.6, -12.27}, {62.7, -12.22}, {62.8, -12.16}, {62.9, -12.11},
        {63.0, -12.06}, {63.1, -12.01}, {63.2, -11.95}, {63.3, -11.90}, {63.4, -11.85},
        {63.5, -11.80}, {63.6, -11.74}, {63.7, -11.69}, {63.8, -11.64}, {63.9, -11.59},
        {64.0, -11.53}, {64.1, -11.48}, {64.2, -11.43}, {64.3, -11.38}, {64.4, -11.32},
        {64.5, -11.27}, {64.6, -11.22}, {64.7, -11.16}, {64.8, -11.11}, {64.9, -11.06},
        {65.0, -11.01}, {65.1, -10.95}, {65.2, -10.90}, {65.3, -10.85}, {65.4, -10.80},
        {65.5, -10.74}, {65.6, -10.69}, {65.7, -10.64}, {65.8, -10.59}, {65.9, -10.53},
        {66.0, -10.48}, {66.1, -10.43}, {66.2, -10.38}, {66.3, -10.32}, {66.4, -10.27},
        {66.5, -10.22}, {66.6, -10.17}, {66.7, -10.11}, {66.8, -10.06}, {66.9, -10.01},
        {67.0, -9.95},  {67.1, -9.90},  {67.2, -9.85},  {67.3, -9.80},  {67.4, -9.74},
        {67.5, -9.69},  {67.6, -9.64},  {67.7, -9.59},  {67.8, -9.53},  {67.9, -9.48},
        {68.0, -9.43},  {68.1, -9.38},  {68.2, -9.32},  {68.3, -9.27},  {68.4, -9.22},
        {68.5, -9.17},  {68.6, -9.11},  {68.7, -9.06},  {68.8, -9.01},  {68.9, -8.96},
        {69.0, -8.90},  {69.1, -8.85},  {69.2, -8.80},  {69.3, -8.74},  {69.4, -8.69},
        {69.5, -8.64},  {69.6, -8.59},  {69.7, -8.53},  {69.8, -8.48},  {69.9, -8.43},
        {70.0, -8.38},  {70.1, -8.32},  {70.2, -8.27},  {70.3, -8.22},  {70.4, -8.17},
        {70.5, -8.11},  {70.6, -8.06},  {70.7, -8.01},  {70.8, -7.96},  {70.9, -7.90},
        {71.0, -7.85},  {71.1, -7.80},  {71.2, -7.75},  {71.3, -7.69},  {71.4, -7.64},
        {71.5, -7.59},  {71.6, -7.53},  {71.7, -7.48},  {71.8, -7.43},  {71.9, -7.38},
        {72.0, -7.32},  {72.1, -7.27},  {72.2, -7.22},  {72.3, -7.17},  {72.4, -7.11},
        {72.5, -7.06},  {72.6, -7.01},  {72.7, -6.96},  {72.8, -6.90},  {72.9, -6.85},
        {73.0, -6.80},  {73.1, -6.75},  {73.2, -6.69},  {73.3, -6.64},  {73.4, -6.59},
        {73.5, -6.54},  {73.6, -6.48},  {73.7, -6.43},  {73.8, -6.38},  {73.9, -6.32},
        {74.0, -6.27},  {74.1, -6.22},  {74.2, -6.17},  {74.3, -6.11},  {74.4, -6.06},
        {74.5, -6.01},  {74.6, -5.96},  {74.7, -5.90},  {74.8, -5.85},  {74.9, -5.80},
        {75.0, -5.75},  {75.1, -5.69},  {75.2, -5.64},  {75.3, -5.59},  {75.4, -5.54},
        {75.5, -5.48},  {75.6, -5.43},  {75.7, -5.38},  {75.8, -5.33},  {75.9, -5.27},
        {76.0, -5.22},  {76.1, -5.17},  {76.2, -5.11},  {76.3, -5.06},  {76.4, -5.01},
        {76.5, -4.96},  {76.6, -4.90},  {76.7, -4.85},  {76.8, -4.80},  {76.9, -4.75},
        {77.0, -4.69},  {77.1, -4.64},  {77.2, -4.59},  {77.3, -4.54},  {77.4, -4.48},
        {77.5, -4.43},  {77.6, -4.38},  {77.7, -4.33},  {77.8, -4.27},  {77.9, -4.22},
        {78.0, -4.17},  {78.1, -4.12},  {78.2, -4.06},  {78.3, -4.01},  {78.4, -3.96},
        {78.5, -3.90},  {78.6, -3.85},  {78.7, -3.80},  {78.8, -3.75},  {78.9, -3.69},
        {79.0, -3.64},  {79.1, -3.59},  {79.2, -3.54},  {79.3, -3.48},  {79.4, -3.43},
        {79.5, -3.38},  {79.6, -3.33},  {79.7, -3.27},  {79.8, -3.22},  {79.9, -3.17},
        {80.0, -3.12}
    }},
    {85.0, {
        {60.0, -14.17}, {60.1, -14.11}, {60.2, -14.06}, {60.3, -14.01}, {60.4, -13.96},
        {60.5, -13.90}, {60.6, -13.85}, {60.7, -13.80}, {60.8, -13.75}, {60.9, -13.69},
        {61.0, -13.64}, {61.1, -13.59}, {61.2, -13.54}, {61.3, -13.48}, {61.4, -13.43},
        {61.5, -13.38}, {61.6, -13.32}, {61.7, -13.27}, {61.8, -13.22}, {61.9, -13.17},
        {62.0, -13.11}, {62.1, -13.06}, {62.2, -13.01}, {62.3, -12.96}, {62.4, -12.90},
        {62.5, -12.85}, {62.6, -12.80}, {62.7, -12.75}, {62.8, -12.69}, {62.9, -12.64},
        {63.0, -12.59}, {63.1, -12.54}, {63.2, -12.48}, {63.3, -12.43}, {63.4, -12.38},
        {63.5, -12.33}, {63.6, -12.27}, {63.7, -12.22}, {63.8, -12.17}, {63.9, -12.11},
        {64.0, -12.06}, {64.1, -12.01}, {64.2, -11.96}, {64.3, -11.90}, {64.4, -11.85},
        {64.5, -11.80}, {64.6, -11.75}, {64.7, -11.69}, {64.8, -11.64}, {64.9, -11.59},
        {65.0, -11.54}, {65.1, -11.48}, {65.2, -11.43}, {65.3, -11.38}, {65.4, -11.33},
        {65.5, -11.27}, {65.6, -11.22}, {65.7, -11.17}, {65.8, -11.11}, {65.9, -11.06},
        {66.0, -11.01}, {66.1, -10.96}, {66.2, -10.90}, {66.3, -10.85}, {66.4, -10.80},
        {66.5, -10.75}, {66.6, -10.69}, {66.7, -10.64}, {66.8, -10.59}, {66.9, -10.54},
        {67.0, -10.48}, {67.1, -10.43}, {67.2, -10.38}, {67.3, -10.33}, {67.4, -10.27},
        {67.5, -10.22}, {67.6, -10.17}, {67.7, -10.12}, {67.8, -10.06}, {67.9, -10.01},
        {68.0, -9.96},  {68.1, -9.91},  {68.2, -9.85},  {68.3, -9.80},  {68.4, -9.75},
        {68.5, -9.69},  {68.6, -9.64},  {68.7, -9.59},  {68.8, -9.54},  {68.9, -9.48},
        {69.0, -9.43},  {69.1, -9.38},  {69.2, -9.33},  {69.3, -9.27},  {69.4, -9.22},
        {69.5, -9.17},  {69.6, -9.12},  {69.7, -9.06},  {69.8, -9.01},  {69.9, -8.96},
        {70.0, -8.91},  {70.1, -8.85},  {70.2, -8.80},  {70.3, -8.75},  {70.4, -8.69},
        {70.5, -8.64},  {70.6, -8.59},  {70.7, -8.54},  {70.8, -8.48},  {70.9, -8.43},
        {71.0, -8.38},  {71.1, -8.33},  {71.2, -8.27},  {71.3, -8.22},  {71.4, -8.17},
        {71.5, -8.12},  {71.6, -8.06},  {71.7, -8.01},  {71.8, -7.96},  {71.9, -7.91},
        {72.0, -7.85},  {72.1, -7.80},  {72.2, -7.75},  {72.3, -7.70},  {72.4, -7.64},
        {72.5, -7.59},  {72.6, -7.54},  {72.7, -7.48},  {72.8, -7.43},  {72.9, -7.38},
        {73.0, -7.33},  {73.1, -7.27},  {73.2, -7.22},  {73.3, -7.17},  {73.4, -7.12},
        {73.5, -7.06},  {73.6, -7.01},  {73.7, -6.96},  {73.8, -6.91},  {73.9, -6.85},
        {74.0, -6.80},  {74.1, -6.75},  {74.2, -6.70},  {74.3, -6.64},  {74.4, -6.59},
        {74.5, -6.54},  {74.6, -6.49},  {74.7, -6.43},  {74.8, -6.38},  {74.9, -6.33},
        {75.0, -6.27},  {75.1, -6.22},  {75.2, -6.17},  {75.3, -6.12},  {75.4, -6.06},
        {75.5, -6.01},  {75.6, -5.96},  {75.7, -5.91},  {75.8, -5.85},  {75.9, -5.80},
        {76.0, -5.75},  {76.1, -5.70},  {76.2, -5.64},  {76.3, -5.59},  {76.4, -5.54},
        {76.5, -5.49},  {76.6, -5.43},  {76.7, -5.38},  {76.8, -5.33},  {76.9, -5.28},
        {77.0, -5.22},  {77.1, -5.17},  {77.2, -5.12},  {77.3, -5.07},  {77.4, -5.01},
        {77.5, -4.96},  {77.6, -4.91},  {77.7, -4.85},  {77.8, -4.80},  {77.9, -4.75},
        {78.0, -4.70},  {78.1, -4.64},  {78.2, -4.59},  {78.3, -4.54},  {78.4, -4.49},
        {78.5, -4.43},  {78.6, -4.38},  {78.7, -4.33},  {78.8, -4.28},  {78.9, -4.22},
        {79.0, -4.17},  {79.1, -4.12},  {79.2, -4.07},  {79.3, -4.01},  {79.4, -3.96},
        {79.5, -3.91},  {79.6, -3.85},  {79.7, -3.80},  {79.8, -3.75},  {79.9, -3.70},
        {80.0, -3.64}
    }},
    {86.0, {
        {60.0, -14.70}, {60.1, -14.64}, {60.2, -14.59}, {60.3, -14.54}, {60.4, -14.48},
        {60.5, -14.43}, {60.6, -14.38}, {60.7, -14.33}, {60.8, -14.27}, {60.9, -14.22},
        {61.0, -14.17}, {61.1, -14.12}, {61.2, -14.06}, {61.3, -14.01}, {61.4, -13.96},
        {61.5, -13.91}, {61.6, -13.85}, {61.7, -13.80}, {61.8, -13.75}, {61.9, -13.70},
        {62.0, -13.64}, {62.1, -13.59}, {62.2, -13.54}, {62.3, -13.49}, {62.4, -13.43},
        {62.5, -13.38}, {62.6, -13.33}, {62.7, -13.27}, {62.8, -13.22}, {62.9, -13.17},
        {63.0, -13.12}, {63.1, -13.06}, {63.2, -13.01}, {63.3, -12.96}, {63.4, -12.91},
        {63.5, -12.85}, {63.6, -12.80}, {63.7, -12.75}, {63.8, -12.70}, {63.9, -12.64},
        {64.0, -12.59}, {64.1, -12.54}, {64.2, -12.49}, {64.3, -12.43}, {64.4, -12.38},
        {64.5, -12.33}, {64.6, -12.28}, {64.7, -12.22}, {64.8, -12.17}, {64.9, -12.12},
        {65.0, -12.06}, {65.1, -12.01}, {65.2, -11.96}, {65.3, -11.91}, {65.4, -11.85},
        {65.5, -11.80}, {65.6, -11.75}, {65.7, -11.70}, {65.8, -11.64}, {65.9, -11.59},
        {66.0, -11.54}, {66.1, -11.49}, {66.2, -11.43}, {66.3, -11.38}, {66.4, -11.33},
        {66.5, -11.28}, {66.6, -11.22}, {66.7, -11.17}, {66.8, -11.12}, {66.9, -11.07},
        {67.0, -11.01}, {67.1, -10.96}, {67.2, -10.91}, {67.3, -10.85}, {67.4, -10.80},
        {67.5, -10.75}, {67.6, -10.70}, {67.7, -10.64}, {67.8, -10.59}, {67.9, -10.54},
        {68.0, -10.49}, {68.1, -10.43}, {68.2, -10.38}, {68.3, -10.33}, {68.4, -10.28},
        {68.5, -10.22}, {68.6, -10.17}, {68.7, -10.12}, {68.8, -10.07}, {68.9, -10.01},
        {69.0, -9.96},  {69.1, -9.91},  {69.2, -9.86},  {69.3, -9.80},  {69.4, -9.75},
        {69.5, -9.70},  {69.6, -9.64},  {69.7, -9.59},  {69.8, -9.54},  {69.9, -9.49},
        {70.0, -9.43},  {70.1, -9.38},  {70.2, -9.33},  {70.3, -9.28},  {70.4, -9.22},
        {70.5, -9.17},  {70.6, -9.12},  {70.7, -9.07},  {70.8, -9.01},  {70.9, -8.96},
        {71.0, -8.91},  {71.1, -8.86},  {71.2, -8.80},  {71.3, -8.75},  {71.4, -8.70},
        {71.5, -8.65},  {71.6, -8.59},  {71.7, -8.54},  {71.8, -8.49},  {71.9, -8.43},
        {72.0, -8.38},  {72.1, -8.33},  {72.2, -8.28},  {72.3, -8.22},  {72.4, -8.17},
        {72.5, -8.12},  {72.6, -8.07},  {72.7, -8.01},  {72.8, -7.96},  {72.9, -7.91},
        {73.0, -7.86},  {73.1, -7.80},  {73.2, -7.75},  {73.3, -7.70},  {73.4, -7.65},
        {73.5, -7.59},  {73.6, -7.54},  {73.7, -7.49},  {73.8, -7.44},  {73.9, -7.38},
        {74.0, -7.33},  {74.1, -7.28},  {74.2, -7.22},  {74.3, -7.17},  {74.4, -7.12},
        {74.5, -7.07},  {74.6, -7.01},  {74.7, -6.96},  {74.8, -6.91},  {74.9, -6.86},
        {75.0, -6.80},  {75.1, -6.75},  {75.2, -6.70},  {75.3, -6.65},  {75.4, -6.59},
        {75.5, -6.54},  {75.6, -6.49},  {75.7, -6.44},  {75.8, -6.38},  {75.9, -6.33},
        {76.0, -6.28},  {76.1, -6.23},  {76.2, -6.17},  {76.3, -6.12},  {76.4, -6.07},
        {76.5, -6.01},  {76.6, -5.96},  {76.7, -5.91},  {76.8, -5.86},  {76.9, -5.80},
        {77.0, -5.75},  {77.1, -5.70},  {77.2, -5.65},  {77.3, -5.59},  {77.4, -5.54},
        {77.5, -5.49},  {77.6, -5.44},  {77.7, -5.38},  {77.8, -5.33},  {77.9, -5.28},
        {78.0, -5.23},  {78.1, -5.17},  {78.2, -5.12},  {78.3, -5.07},  {78.4, -5.02},
        {78.5, -4.96},  {78.6, -4.91},  {78.7, -4.86},  {78.8, -4.80},  {78.9, -4.75},
        {79.0, -4.70},  {79.1, -4.65},  {79.2, -4.59},  {79.3, -4.54},  {79.4, -4.49},
        {79.5, -4.44},  {79.6, -4.38},  {79.7, -4.33},  {79.8, -4.28},  {79.9, -4.23},
        {80.0, -4.17}
    }},
    {87.0, {
        {60.0, -15.22}, {60.1, -15.17}, {60.2, -15.12}, {60.3, -15.07}, {60.4, -15.01},
        {60.5, -14.96}, {60.6, -14.91}, {60.7, -14.86}, {60.8, -14.80}, {60.9, -14.75},
        {61.0, -14.70}, {61.1, -14.65}, {61.2, -14.59}, {61.3, -14.54}, {61.4, -14.49},
        {61.5, -14.43}, {61.6, -14.38}, {61.7, -14.33}, {61.8, -14.28}, {61.9, -14.22},
        {62.0, -14.17}, {62.1, -14.12}, {62.2, -14.07}, {62.3, -14.01}, {62.4, -13.96},
        {62.5, -13.91}, {62.6, -13.86}, {62.7, -13.80}, {62.8, -13.75}, {62.9, -13.70},
        {63.0, -13.65}, {63.1, -13.59}, {63.2, -13.54}, {63.3, -13.49}, {63.4, -13.44},
        {63.5, -13.38}, {63.6, -13.33}, {63.7, -13.28}, {63.8, -13.22}, {63.9, -13.17},
        {64.0, -13.12}, {64.1, -13.07}, {64.2, -13.01}, {64.3, -12.96}, {64.4, -12.91},
        {64.5, -12.86}, {64.6, -12.80}, {64.7, -12.75}, {64.8, -12.70}, {64.9, -12.65},
        {65.0, -12.59}, {65.1, -12.54}, {65.2, -12.49}, {65.3, -12.44}, {65.4, -12.38},
        {65.5, -12.33}, {65.6, -12.28}, {65.7, -12.23}, {65.8, -12.17}, {65.9, -12.12},
        {66.0, -12.07}, {66.1, -12.01}, {66.2, -11.96}, {66.3, -11.91}, {66.4, -11.86},
        {66.5, -11.80}, {66.6, -11.75}, {66.7, -11.70}, {66.8, -11.65}, {66.9, -11.59},
        {67.0, -11.54}, {67.1, -11.49}, {67.2, -11.44}, {67.3, -11.38}, {67.4, -11.33},
        {67.5, -11.28}, {67.6, -11.23}, {67.7, -11.17}, {67.8, -11.12}, {67.9, -11.07},
        {68.0, -11.02}, {68.1, -10.96}, {68.2, -10.91}, {68.3, -10.86}, {68.4, -10.80},
        {68.5, -10.75}, {68.6, -10.70}, {68.7, -10.65}, {68.8, -10.59}, {68.9, -10.54},
        {69.0, -10.49}, {69.1, -10.44}, {69.2, -10.38}, {69.3, -10.33}, {69.4, -10.28},
        {69.5, -10.23}, {69.6, -10.17}, {69.7, -10.12}, {69.8, -10.07}, {69.9, -10.02},
        {70.0, -9.96},  {70.1, -9.91},  {70.2, -9.86},  {70.3, -9.81},  {70.4, -9.75},
        {70.5, -9.70},  {70.6, -9.65},  {70.7, -9.59},  {70.8, -9.54},  {70.9, -9.49},
        {71.0, -9.44},  {71.1, -9.38},  {71.2, -9.33},  {71.3, -9.28},  {71.4, -9.23},
        {71.5, -9.17},  {71.6, -9.12},  {71.7, -9.07},  {71.8, -9.02},  {71.9, -8.96},
        {72.0, -8.91},  {72.1, -8.86},  {72.2, -8.81},  {72.3, -8.75},  {72.4, -8.70},
        {72.5, -8.65},  {72.6, -8.60},  {72.7, -8.54},  {72.8, -8.49},  {72.9, -8.44},
        {73.0, -8.38},  {73.1, -8.33},  {73.2, -8.28},  {73.3, -8.23},  {73.4, -8.17},
        {73.5, -8.12},  {73.6, -8.07},  {73.7, -8.02},  {73.8, -7.96},  {73.9, -7.91},
        {74.0, -7.86},  {74.1, -7.81},  {74.2, -7.75},  {74.3, -7.70},  {74.4, -7.65},
        {74.5, -7.60},  {74.6, -7.54},  {74.7, -7.49},  {74.8, -7.44},  {74.9, -7.39},
        {75.0, -7.33},  {75.1, -7.28},  {75.2, -7.23},  {75.3, -7.17},  {75.4, -7.12},
        {75.5, -7.07},  {75.6, -7.02},  {75.7, -6.96},  {75.8, -6.91},  {75.9, -6.86},
        {76.0, -6.81},  {76.1, -6.75},  {76.2, -6.70},  {76.3, -6.65},  {76.4, -6.60},
        {76.5, -6.54},  {76.6, -6.49},  {76.7, -6.44},  {76.8, -6.39},  {76.9, -6.33},
        {77.0, -6.28},  {77.1, -6.23},  {77.2, -6.18},  {77.3, -6.12},  {77.4, -6.07},
        {77.5, -6.02},  {77.6, -5.96},  {77.7, -5.91},  {77.8, -5.86},  {77.9, -5.81},
        {78.0, -5.75},  {78.1, -5.70},  {78.2, -5.65},  {78.3, -5.60},  {78.4, -5.54},
        {78.5, -5.49},  {78.6, -5.44},  {78.7, -5.39},  {78.8, -5.33},  {78.9, -5.28},
        {79.0, -5.23},  {79.1, -5.18},  {79.2, -5.12},  {79.3, -5.07},  {79.4, -5.02},
        {79.5, -4.97},  {79.6, -4.91},  {79.7, -4.86},  {79.8, -4.81},  {79.9, -4.75},
        {80.0, -4.70}
    }},
    {88.0, {
        {60.0, -15.75}, {60.1, -15.70}, {60.2, -15.65}, {60.3, -15.60}, {60.4, -15.54},
        {60.5, -15.49}, {60.6, -15.44}, {60.7, -15.38}, {60.8, -15.33}, {60.9, -15.28},
        {61.0, -15.23}, {61.1, -15.17}, {61.2, -15.12}, {61.3, -15.07}, {61.4, -15.02},
        {61.5, -14.96}, {61.6, -14.91}, {61.7, -14.86}, {61.8, -14.81}, {61.9, -14.75},
        {62.0, -14.70}, {62.1, -14.65}, {62.2, -14.60}, {62.3, -14.54}, {62.4, -14.49},
        {62.5, -14.44}, {62.6, -14.39}, {62.7, -14.33}, {62.8, -14.28}, {62.9, -14.23},
        {63.0, -14.17}, {63.1, -14.12}, {63.2, -14.07}, {63.3, -14.02}, {63.4, -13.96},
        {63.5, -13.91}, {63.6, -13.86}, {63.7, -13.81}, {63.8, -13.75}, {63.9, -13.70},
        {64.0, -13.65}, {64.1, -13.60}, {64.2, -13.54}, {64.3, -13.49}, {64.4, -13.44},
        {64.5, -13.39}, {64.6, -13.33}, {64.7, -13.28}, {64.8, -13.23}, {64.9, -13.18},
        {65.0, -13.12}, {65.1, -13.07}, {65.2, -13.02}, {65.3, -12.96}, {65.4, -12.91},
        {65.5, -12.86}, {65.6, -12.81}, {65.7, -12.75}, {65.8, -12.70}, {65.9, -12.65},
        {66.0, -12.60}, {66.1, -12.54}, {66.2, -12.49}, {66.3, -12.44}, {66.4, -12.39},
        {66.5, -12.33}, {66.6, -12.28}, {66.7, -12.23}, {66.8, -12.18}, {66.9, -12.12},
        {67.0, -12.07}, {67.1, -12.02}, {67.2, -11.97}, {67.3, -11.91}, {67.4, -11.86},
        {67.5, -11.81}, {67.6, -11.75}, {67.7, -11.70}, {67.8, -11.65}, {67.9, -11.60},
        {68.0, -11.54}, {68.1, -11.49}, {68.2, -11.44}, {68.3, -11.39}, {68.4, -11.33},
        {68.5, -11.28}, {68.6, -11.23}, {68.7, -11.18}, {68.8, -11.12}, {68.9, -11.07},
        {69.0, -11.02}, {69.1, -10.97}, {69.2, -10.91}, {69.3, -10.86}, {69.4, -10.81},
        {69.5, -10.76}, {69.6, -10.70}, {69.7, -10.65}, {69.8, -10.60}, {69.9, -10.54},
        {70.0, -10.49}, {70.1, -10.44}, {70.2, -10.39}, {70.3, -10.33}, {70.4, -10.28},
        {70.5, -10.23}, {70.6, -10.18}, {70.7, -10.12}, {70.8, -10.07}, {70.9, -10.02},
        {71.0, -9.97},  {71.1, -9.91},  {71.2, -9.86},  {71.3, -9.81},  {71.4, -9.76},
        {71.5, -9.70},  {71.6, -9.65},  {71.7, -9.60},  {71.8, -9.55},  {71.9, -9.49},
        {72.0, -9.44},  {72.1, -9.39},  {72.2, -9.33},  {72.3, -9.28},  {72.4, -9.23},
        {72.5, -9.18},  {72.6, -9.12},  {72.7, -9.07},  {72.8, -9.02},  {72.9, -8.97},
        {73.0, -8.91},  {73.1, -8.86},  {73.2, -8.81},  {73.3, -8.76},  {73.4, -8.70},
        {73.5, -8.65},  {73.6, -8.60},  {73.7, -8.55},  {73.8, -8.49},  {73.9, -8.44},
        {74.0, -8.39},  {74.1, -8.34},  {74.2, -8.28},  {74.3, -8.23},  {74.4, -8.18},
        {74.5, -8.12},  {74.6, -8.07},  {74.7, -8.02},  {74.8, -7.97},  {74.9, -7.91},
        {75.0, -7.86},  {75.1, -7.81},  {75.2, -7.76},  {75.3, -7.70},  {75.4, -7.65},
        {75.5, -7.60},  {75.6, -7.55},  {75.7, -7.49},  {75.8, -7.44},  {75.9, -7.39},
        {76.0, -7.34},  {76.1, -7.28},  {76.2, -7.23},  {76.3, -7.18},  {76.4, -7.13},
        {76.5, -7.07},  {76.6, -7.02},  {76.7, -6.97},  {76.8, -6.91},  {76.9, -6.86},
        {77.0, -6.81},  {77.1, -6.76},  {77.2, -6.70},  {77.3, -6.65},  {77.4, -6.60},
        {77.5, -6.55},  {77.6, -6.49},  {77.7, -6.44},  {77.8, -6.39},  {77.9, -6.34},
        {78.0, -6.28},  {78.1, -6.23},  {78.2, -6.18},  {78.3, -6.13},  {78.4, -6.07},
        {78.5, -6.02},  {78.6, -5.97},  {78.7, -5.92},  {78.8, -5.86},  {78.9, -5.81},
        {79.0, -5.76},  {79.1, -5.70},  {79.2, -5.65},  {79.3, -5.60},  {79.4, -5.55},
        {79.5, -5.49},  {79.6, -5.44},  {79.7, -5.39},  {79.8, -5.34},  {79.9, -5.28},
        {80.0, -5.23}
    }},
    {89.0, {
        {60.0, -16.28}, {60.1, -16.23}, {60.2, -16.18}, {60.3, -16.12}, {60.4, -16.07},
        {60.5, -16.02}, {60.6, -15.97}, {60.7, -15.91}, {60.8, -15.86}, {60.9, -15.81},
        {61.0, -15.76}, {61.1, -15.70}, {61.2, -15.65}, {61.3, -15.60}, {61.4, -15.55},
        {61.5, -15.49}, {61.6, -15.44}, {61.7, -15.39}, {61.8, -15.34}, {61.9, -15.28},
        {62.0, -15.23}, {62.1, -15.18}, {62.2, -15.12}, {62.3, -15.07}, {62.4, -15.02},
        {62.5, -14.97}, {62.6, -14.91}, {62.7, -14.86}, {62.8, -14.81}, {62.9, -14.76},
        {63.0, -14.70}, {63.1, -14.65}, {63.2, -14.60}, {63.3, -14.55}, {63.4, -14.49},
        {63.5, -14.44}, {63.6, -14.39}, {63.7, -14.34}, {63.8, -14.28}, {63.9, -14.23},
        {64.0, -14.18}, {64.1, -14.12}, {64.2, -14.07}, {64.3, -14.02}, {64.4, -13.97},
        {64.5, -13.91}, {64.6, -13.86}, {64.7, -13.81}, {64.8, -13.76}, {64.9, -13.70},
        {65.0, -13.65}, {65.1, -13.60}, {65.2, -13.55}, {65.3, -13.49}, {65.4, -13.44},
        {65.5, -13.39}, {65.6, -13.34}, {65.7, -13.28}, {65.8, -13.23}, {65.9, -13.18},
        {66.0, -13.13}, {66.1, -13.07}, {66.2, -13.02}, {66.3, -12.97}, {66.4, -12.91},
        {66.5, -12.86}, {66.6, -12.81}, {66.7, -12.76}, {66.8, -12.70}, {66.9, -12.65},
        {67.0, -12.60}, {67.1, -12.55}, {67.2, -12.49}, {67.3, -12.44}, {67.4, -12.39},
        {67.5, -12.34}, {67.6, -12.28}, {67.7, -12.23}, {67.8, -12.18}, {67.9, -12.13},
        {68.0, -12.07}, {68.1, -12.02}, {68.2, -11.97}, {68.3, -11.92}, {68.4, -11.86},
        {68.5, -11.81}, {68.6, -11.76}, {68.7, -11.70}, {68.8, -11.65}, {68.9, -11.60},
        {69.0, -11.55}, {69.1, -11.49}, {69.2, -11.44}, {69.3, -11.39}, {69.4, -11.34},
        {69.5, -11.28}, {69.6, -11.23}, {69.7, -11.18}, {69.8, -11.13}, {69.9, -11.07},
        {70.0, -11.02}, {70.1, -10.97}, {70.2, -10.92}, {70.3, -10.86}, {70.4, -10.81},
        {70.5, -10.76}, {70.6, -10.71}, {70.7, -10.65}, {70.8, -10.60}, {70.9, -10.55},
        {71.0, -10.49}, {71.1, -10.44}, {71.2, -10.39}, {71.3, -10.34}, {71.4, -10.28},
        {71.5, -10.23}, {71.6, -10.18}, {71.7, -10.13}, {71.8, -10.07}, {71.9, -10.02},
        {72.0, -9.97},  {72.1, -9.92},  {72.2, -9.86},  {72.3, -9.81},  {72.4, -9.76},
        {72.5, -9.71},  {72.6, -9.65},  {72.7, -9.60},  {72.8, -9.55},  {72.9, -9.50},
        {73.0, -9.44},  {73.1, -9.39},  {73.2, -9.34},  {73.3, -9.28},  {73.4, -9.23},
        {73.5, -9.18},  {73.6, -9.13},  {73.7, -9.07},  {73.8, -9.02},  {73.9, -8.97},
        {74.0, -8.92},  {74.1, -8.86},  {74.2, -8.81},  {74.3, -8.76},  {74.4, -8.71},
        {74.5, -8.65},  {74.6, -8.60},  {74.7, -8.55},  {74.8, -8.50},  {74.9, -8.44},
        {75.0, -8.39},  {75.1, -8.34},  {75.2, -8.29},  {75.3, -8.23},  {75.4, -8.18},
        {75.5, -8.13},  {75.6, -8.07},  {75.7, -8.02},  {75.8, -7.97},  {75.9, -7.92},
        {76.0, -7.86},  {76.1, -7.81},  {76.2, -7.76},  {76.3, -7.71},  {76.4, -7.65},
        {76.5, -7.60},  {76.6, -7.55},  {76.7, -7.50},  {76.8, -7.44},  {76.9, -7.39},
        {77.0, -7.34},  {77.1, -7.29},  {77.2, -7.23},  {77.3, -7.18},  {77.4, -7.13},
        {77.5, -7.08},  {77.6, -7.02},  {77.7, -6.97},  {77.8, -6.92},  {77.9, -6.86},
        {78.0, -6.81},  {78.1, -6.76},  {78.2, -6.71},  {78.3, -6.65},  {78.4, -6.60},
        {78.5, -6.55},  {78.6, -6.50},  {78.7, -6.44},  {78.8, -6.39},  {78.9, -6.34},
        {79.0, -6.29},  {79.1, -6.23},  {79.2, -6.18},  {79.3, -6.13},  {79.4, -6.08},
        {79.5, -6.02},  {79.6, -5.97},  {79.7, -5.92},  {79.8, -5.87},  {79.9, -5.81},
        {80.0, -5.76}
    }},
    {90.0, {
        {60.0, -16.81}, {60.1, -16.76}, {60.2, -16.71}, {60.3, -16.65}, {60.4, -16.60},
        {60.5, -16.55}, {60.6, -16.50}, {60.7, -16.44}, {60.8, -16.39}, {60.9, -16.34},
        {61.0, -16.28}, {61.1, -16.23}, {61.2, -16.18}, {61.3, -16.13}, {61.4, -16.07},
        {61.5, -16.02}, {61.6, -15.97}, {61.7, -15.92}, {61.8, -15.86}, {61.9, -15.81},
        {62.0, -15.76}, {62.1, -15.71}, {62.2, -15.65}, {62.3, -15.60}, {62.4, -15.55},
        {62.5, -15.50}, {62.6, -15.44}, {62.7, -15.39}, {62.8, -15.34}, {62.9, -15.29},
        {63.0, -15.23}, {63.1, -15.18}, {63.2, -15.13}, {63.3, -15.07}, {63.4, -15.02},
        {63.5, -14.97}, {63.6, -14.92}, {63.7, -14.86}, {63.8, -14.81}, {63.9, -14.76},
        {64.0, -14.71}, {64.1, -14.65}, {64.2, -14.60}, {64.3, -14.55}, {64.4, -14.50},
        {64.5, -14.44}, {64.6, -14.39}, {64.7, -14.34}, {64.8, -14.29}, {64.9, -14.23},
        {65.0, -14.18}, {65.1, -14.13}, {65.2, -14.08}, {65.3, -14.02}, {65.4, -13.97},
        {65.5, -13.92}, {65.6, -13.86}, {65.7, -13.81}, {65.8, -13.76}, {65.9, -13.71},
        {66.0, -13.65}, {66.1, -13.60}, {66.2, -13.55}, {66.3, -13.50}, {66.4, -13.44},
        {66.5, -13.39}, {66.6, -13.34}, {66.7, -13.29}, {66.8, -13.23}, {66.9, -13.18},
        {67.0, -13.13}, {67.1, -13.08}, {67.2, -13.02}, {67.3, -12.97}, {67.4, -12.92},
        {67.5, -12.87}, {67.6, -12.81}, {67.7, -12.76}, {67.8, -12.71}, {67.9, -12.65},
        {68.0, -12.60}, {68.1, -12.55}, {68.2, -12.50}, {68.3, -12.44}, {68.4, -12.39},
        {68.5, -12.34}, {68.6, -12.29}, {68.7, -12.23}, {68.8, -12.18}, {68.9, -12.13},
        {69.0, -12.08}, {69.1, -12.02}, {69.2, -11.97}, {69.3, -11.92}, {69.4, -11.87},
        {69.5, -11.81}, {69.6, -11.76}, {69.7, -11.71}, {69.8, -11.66}, {69.9, -11.60},
        {70.0, -11.55}, {70.1, -11.50}, {70.2, -11.44}, {70.3, -11.39}, {70.4, -11.34},
        {70.5, -11.29}, {70.6, -11.23}, {70.7, -11.18}, {70.8, -11.13}, {70.9, -11.08},
        {71.0, -11.02}, {71.1, -10.97}, {71.2, -10.92}, {71.3, -10.87}, {71.4, -10.81},
        {71.5, -10.76}, {71.6, -10.71}, {71.7, -10.66}, {71.8, -10.60}, {71.9, -10.55},
        {72.0, -10.50}, {72.1, -10.45}, {72.2, -10.39}, {72.3, -10.34}, {72.4, -10.29},
        {72.5, -10.23}, {72.6, -10.18}, {72.7, -10.13}, {72.8, -10.08}, {72.9, -10.02},
        {73.0, -9.97},  {73.1, -9.92},  {73.2, -9.87},  {73.3, -9.81},  {73.4, -9.76},
        {73.5, -9.71},  {73.6, -9.66},  {73.7, -9.60},  {73.8, -9.55},  {73.9, -9.50},
        {74.0, -9.45},  {74.1, -9.39},  {74.2, -9.34},  {74.3, -9.29},  {74.4, -9.24},
        {74.5, -9.18},  {74.6, -9.13},  {74.7, -9.08},  {74.8, -9.02},  {74.9, -8.97},
        {75.0, -8.92},  {75.1, -8.87},  {75.2, -8.81},  {75.3, -8.76},  {75.4, -8.71},
        {75.5, -8.66},  {75.6, -8.60},  {75.7, -8.55},  {75.8, -8.50},  {75.9, -8.45},
        {76.0, -8.39},  {76.1, -8.34},  {76.2, -8.29},  {76.3, -8.24},  {76.4, -8.18},
        {76.5, -8.13},  {76.6, -8.08},  {76.7, -8.03},  {76.8, -7.97},  {76.9, -7.92},
        {77.0, -7.87},  {77.1, -7.81},  {77.2, -7.76},  {77.3, -7.71},  {77.4, -7.66},
        {77.5, -7.60},  {77.6, -7.55},  {77.7, -7.50},  {77.8, -7.45},  {77.9, -7.39},
        {78.0, -7.34},  {78.1, -7.29},  {78.2, -7.24},  {78.3, -7.18},  {78.4, -7.13},
        {78.5, -7.08},  {78.6, -7.03},  {78.7, -6.97},  {78.8, -6.92},  {78.9, -6.87},
        {79.0, -6.82},  {79.1, -6.76},  {79.2, -6.71},  {79.3, -6.66},  {79.4, -6.60},
        {79.5, -6.55},  {79.6, -6.50},  {79.7, -6.45},  {79.8, -6.39},  {79.9, -6.34},
		{80.0, -6.29}
	}}
};
// --- --- --- --- --- --- --- --- --- --- --- --- --- ---

// 기본값 정의
const double DEFAULT_REFERENCE_PHON = 80.0;
const double DEFAULT_TARGET_PHON = 60.0;
const double FALLBACK_PREAMP = -23.0; // 맵에 값이 없을 경우 사용할 가장 안전한 값
const double TARGET_PHON_MIN = 60.0;
const double TARGET_PHON_MAX = 80.0;

MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent),
      loudnessIndex(0),
      targetPhonValue(DEFAULT_TARGET_PHON),
      preampUserOffset(0.0),
      leftMouseButtonPressed(false) // 멤버 변수 추가
{
    setWindowTitle("ApoLoudness");
    setFixedSize(200, 50);
    setWindowFlags(Qt::WindowStaysOnTopHint | Qt::FramelessWindowHint); // Frameless 추가 (선택 사항)
    // setWindowIcon(QIcon(":/Icons/ApoLoudness.ico"));

    label = new QLabel(this);
    label->setGeometry(0, 0, 200, 50);
    label->setFont(QFont("Arial", 18));
    label->setStyleSheet("QLabel { color: yellow; background-color: black; border-radius: 5px; }"); // 약간의 스타일
    label->setAlignment(Qt::AlignCenter);

    targetLoudness = {80.0, 81.0, 82.0, 83.0, 84.0, 85.0, 86.0, 87.0, 88.0, 89.0, 90.0};

    auto it_ref_default = std::find(targetLoudness.begin(), targetLoudness.end(), DEFAULT_REFERENCE_PHON);
    if (it_ref_default != targetLoudness.end()) {
        loudnessIndex = std::distance(targetLoudness.begin(), it_ref_default);
    }

    readConfig();
    updateConfig();
}

MainWindow::~MainWindow() {
    // Qt가 자식 위젯을 자동으로 관리하므로 label을 명시적으로 delete할 필요는 없습니다.
}

double MainWindow::getRecommendedPreamp(double targetPhon, double referencePhon) {
    double refKey = qRound(referencePhon * 10) / 10.0;
    double targetKey = qRound(targetPhon * 10) / 10.0;

    if (recommendedPreampMap.contains(refKey)) {
        const QMap<double, double>& targetMap = recommendedPreampMap.value(refKey);
        if (targetMap.contains(targetKey)) {
            return targetMap.value(targetKey);
        } else {
            // targetKey에 대한 값이 없을 경우, 가장 가까운 낮은 targetKey의 값을 찾아 반환 (선택적 개선)
            // 예를 들어 targetKey가 65.05라면 65.0의 값을 반환.
            // QMap은 키로 정렬되므로 lowerBound 사용 가능.
            auto it = targetMap.lowerBound(targetKey);
            if (it != targetMap.begin() && (it == targetMap.end() || it.key() != targetKey) ) {
                 --it; // 이전 키 값 사용
                 if (it.key() >= TARGET_PHON_MIN) return it.value();
            } else if (it != targetMap.end() && it.key() == targetKey) {
                return it.value();
            }
            qDebug() << "Warning: No exact or lower bound Target Phon" << targetKey << "for Reference Phon" << refKey << "in map. Using fallback.";
        }
    } else {
        qDebug() << "Warning: No data for Reference Phon" << refKey << "in map. Using fallback.";
    }
    return FALLBACK_PREAMP;
}

void MainWindow::updateConfig() {
    double currentReferencePhon = targetLoudness[loudnessIndex];

    targetPhonValue = std::max(TARGET_PHON_MIN, std::min(targetPhonValue, TARGET_PHON_MAX));
    targetPhonValue = std::min(targetPhonValue, currentReferencePhon); // Target Phon은 Reference Phon을 넘지 않음
    targetPhonValue = qRound(targetPhonValue * 10) / 10.0;

    double recommendedPreamp = getRecommendedPreamp(targetPhonValue, currentReferencePhon);
    double finalPreampValue = recommendedPreamp + preampUserOffset;

    finalPreampValue = std::max(-40.0, std::min(finalPreampValue, 0.0)); // 안전 범위
    finalPreampValue = qRound(finalPreampValue * 10) / 10.0;

    label->setText(QString::number(targetPhonValue, 'f', 1) + "/" + QString::number(currentReferencePhon, 'f', 1) + " dB");
    label->setToolTip("Target / Reference Phon\nPreamp: " + QString::number(finalPreampValue, 'f', 1) + " dB\n(Recommended: " + QString::number(recommendedPreamp, 'f',1) + " dB, User Offset: " + QString::number(preampUserOffset, 'f', 1) + " dB)");

    QFile configFile("C:/Program Files/EqualizerAPO/config/Loudness.txt");
    if (!configFile.open(QIODevice::WriteOnly | QIODevice::Text | QIODevice::Truncate)) {
        qDebug() << "Error: Could not open Loudness.txt for writing.";
        return;
    }
    QTextStream out(&configFile);

    out << "Preamp: " << QString::number(finalPreampValue, 'f', 1) << " dB\n";
    QString convFile = QString::number(targetPhonValue, 'f', 1) + "-" + QString::number(currentReferencePhon, 'f', 1) + "_filter.wav";
    out << "Convolution: Filters/" << convFile; // 실제 필터 경로 확인 필요

    configFile.close();
}

void MainWindow::wheelEvent(QWheelEvent *event) {
    const double phonScrollDelta = 0.1;
    const double preampScrollDelta = 0.1;

    if (event->modifiers() == Qt::NoModifier) { // 그냥 휠: Reference Phon 변경
        if (event->angleDelta().y() > 0) {
            loudnessIndex = (loudnessIndex + 1) % targetLoudness.size();
        } else {
            loudnessIndex = (loudnessIndex - 1 + targetLoudness.size()) % targetLoudness.size();
        }
        // Reference Phon 변경 시 Target Phon이 새 Reference Phon을 넘지 않도록 조정
        targetPhonValue = std::min(targetPhonValue, targetLoudness[loudnessIndex]);
        preampUserOffset = 0.0; // Reference 변경 시 사용자 오프셋 리셋
    } else if (event->modifiers() == Qt::ShiftModifier) { // Shift + 휠: Target Phon 변경
        if (event->angleDelta().y() > 0) {
            targetPhonValue += phonScrollDelta;
        } else {
            targetPhonValue -= phonScrollDelta;
        }
        preampUserOffset = 0.0; // Target Phon 변경 시 사용자 오프셋 리셋
    } else if (event->modifiers() == Qt::ControlModifier) { // Ctrl + 휠: Preamp User Offset 변경
        if (event->angleDelta().y() > 0) {
            preampUserOffset += preampScrollDelta;
        } else {
            preampUserOffset -= preampScrollDelta;
        }
        preampUserOffset = qRound(preampUserOffset * 10) / 10.0;
        preampUserOffset = std::max(-5.0, std::min(preampUserOffset, 5.0)); // 오프셋 범위 제한
    }

    updateConfig();
    event->accept();
}

void MainWindow::mousePressEvent(QMouseEvent *event) {
    if (event->button() == Qt::LeftButton) {
        leftMouseButtonPressed = true;
        // 창 드래그를 위한 시작점 저장 (FramelessWindowHint 사용 시)
        if (windowFlags() & Qt::FramelessWindowHint) {
             dragPosition = event->globalPosition().toPoint() - frameGeometry().topLeft();
        }
    } else if (event->button() == Qt::RightButton && leftMouseButtonPressed) { // 좌클릭 누른 상태에서 우클릭
        targetPhonValue += 1.0; // Target Phon 1.0씩 상승
        // Target Phon 값 범위 제한 (60.0 ~ 80.0 및 현재 Reference Phon 이하)
        targetPhonValue = std::max(TARGET_PHON_MIN, std::min(targetPhonValue, TARGET_PHON_MAX));
        targetPhonValue = std::min(targetPhonValue, targetLoudness[loudnessIndex]);
        preampUserOffset = 0.0; // Target Phon 변경 시 사용자 오프셋 리셋

        updateConfig();
        event->accept();
    } else if (event->button() == Qt::MiddleButton) {
        preampUserOffset = 0.0;
        updateConfig();
        event->accept();
    }
}

void MainWindow::mouseMoveEvent(QMouseEvent *event) {
    // 창 드래그 (FramelessWindowHint 사용 시)
    if ((event->buttons() & Qt::LeftButton) && leftMouseButtonPressed && (windowFlags() & Qt::FramelessWindowHint)) {
        move(event->globalPosition().toPoint() - dragPosition);
        event->accept();
    }
}


void MainWindow::mouseReleaseEvent(QMouseEvent *event) {
    if (event->button() == Qt::LeftButton) {
        leftMouseButtonPressed = false;
    }
}

void MainWindow::mouseDoubleClickEvent(QMouseEvent *event) {
    if (event->button() == Qt::LeftButton) {
        auto it_ref_default = std::find(targetLoudness.begin(), targetLoudness.end(), DEFAULT_REFERENCE_PHON);
        if (it_ref_default != targetLoudness.end()) {
            loudnessIndex = std::distance(targetLoudness.begin(), it_ref_default);
        } else {
            loudnessIndex = 0;
        }
        targetPhonValue = DEFAULT_TARGET_PHON;
        preampUserOffset = 0.0;

        qDebug() << "Double-click reset: Target " << targetPhonValue << ", Reference " << targetLoudness[loudnessIndex];
        updateConfig();
        event->accept();
    }
}

void MainWindow::readConfig() {
    QFile configFile("C:/Program Files/EqualizerAPO/config/Loudness.txt");

    int initialLoudnessIndex = 0;
    auto it_ref_default = std::find(targetLoudness.begin(), targetLoudness.end(), DEFAULT_REFERENCE_PHON);
    if (it_ref_default != targetLoudness.end()) {
        initialLoudnessIndex = std::distance(targetLoudness.begin(), it_ref_default);
    }

    if (!configFile.open(QIODevice::ReadOnly | QIODevice::Text)) {
        qDebug() << "Warning: Could not open Loudness.txt. Using default values.";
        loudnessIndex = initialLoudnessIndex;
        targetPhonValue = DEFAULT_TARGET_PHON;
        preampUserOffset = 0.0;
        return;
    }

    QTextStream in(&configFile);
    QString preampLine = in.readLine();
    QString convLine = in.readLine();
    configFile.close();

    bool preampOk = false;
    double loadedPreampFromFile = FALLBACK_PREAMP;
    if (!preampLine.isEmpty()) {
        QStringList preampParts = preampLine.split(' ');
        if (preampParts.size() >= 2) {
            loadedPreampFromFile = preampParts[1].toDouble(&preampOk);
        }
    }

    double convTargetPhonFromFile = -1;
    double convReferencePhonFromFile = -1;

    if (!convLine.isEmpty()) {
        static QRegularExpression regex("Filters/([0-9]+\\.?[0-9]*)-([0-9]+\\.?[0-9]*)_filter\\.wav");
        static QRegularExpression regex_old("([0-9]+\\.?[0-9]*)-([0-9]+\\.?[0-9]*)_filter\\.wav"); // 이전 형식 호환용

        QRegularExpressionMatch match = regex.match(convLine);

        if (match.hasMatch()) {
            convTargetPhonFromFile = match.captured(1).toDouble();
            convReferencePhonFromFile = match.captured(2).toDouble();
        } else {
            QRegularExpressionMatch match_old = regex_old.match(convLine);
            if (match_old.hasMatch()) {
                convTargetPhonFromFile = match_old.captured(1).toDouble();
                convReferencePhonFromFile = match_old.captured(2).toDouble();
            } else {
                qDebug() << "Could not parse convolution filter line:" << convLine;
            }
        }
    }

    if (convReferencePhonFromFile != -1) {
        double minDifference = std::numeric_limits<double>::max();
        int foundIndex = -1;
        for (int i = 0; i < targetLoudness.size(); ++i) {
            double difference = std::abs(targetLoudness[i] - convReferencePhonFromFile);
            if (difference < 0.05) {
                foundIndex = i;
                break;
            }
            if (difference < minDifference) { minDifference = difference; foundIndex = i; }
        }
        loudnessIndex = (foundIndex != -1) ? foundIndex : initialLoudnessIndex;
        qDebug() << "Config: Reference Phon set to " << targetLoudness[loudnessIndex];
    } else {
        qDebug() << "Config: Could not get Reference Phon from file. Defaulting.";
        loudnessIndex = initialLoudnessIndex;
    }

    if (convTargetPhonFromFile != -1) {
        targetPhonValue = convTargetPhonFromFile;
        targetPhonValue = std::max(TARGET_PHON_MIN, std::min(targetPhonValue, TARGET_PHON_MAX));
        targetPhonValue = std::min(targetPhonValue, targetLoudness[loudnessIndex]);
        targetPhonValue = qRound(targetPhonValue * 10) / 10.0;
        qDebug() << "Config: Target Phon set to " << targetPhonValue;
    } else {
        qDebug() << "Config: Could not get Target Phon from file. Defaulting.";
        targetPhonValue = DEFAULT_TARGET_PHON;
    }

    if (preampOk) {
        double recommendedPreampForLoaded = getRecommendedPreamp(targetPhonValue, targetLoudness[loudnessIndex]);
        preampUserOffset = loadedPreampFromFile - recommendedPreampForLoaded;
        preampUserOffset = qRound(preampUserOffset * 10) / 10.0;
        preampUserOffset = std::max(-5.0, std::min(preampUserOffset, 5.0));
        qDebug() << "Config: Preamp " << loadedPreampFromFile << ", RecPreamp " << recommendedPreampForLoaded << ", UserOffset " << preampUserOffset;
    } else {
        qDebug() << "Config: Invalid/missing preamp. Resetting user offset.";
        preampUserOffset = 0.0;
    }
}

// (선택 사항) FramelessWindowHint 사용 시 창 드래그 기능
void MainWindow::contextMenuEvent(QContextMenuEvent *event)
{
    Q_UNUSED(event);
    // close(); // 예: 우클릭 컨텍스트 메뉴로 종료 기능 (Frameless 시 필요할 수 있음)
}
